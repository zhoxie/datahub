query getAutoCompleteResults($input: AutoCompleteInput!) {
    autoComplete(input: $input) {
        query
        suggestions
    }
}

query getAutoCompleteMultipleResults($input: AutoCompleteMultipleInput!) {
    autoCompleteForMultiple(input: $input) {
        query
        suggestions {
            type
            suggestions
        }
    }
}

fragment searchResults on SearchResults {
    start
    count
    total
    searchResults {
        entity {
            urn
            type
            ... on Dataset {
                name
                origin
                uri
                platform {
                    ...platformFields
                }
                editableProperties {
                    description
                }
                platformNativeType
                properties {
                    description
                    customProperties {
                        key
                        value
                    }
                }
                ownership {
                    ...ownershipFields
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                subTypes {
                    typeNames
                }
                domain {
                    ...entityDomain
                }
                container {
                    ...entityContainer
                }
            }
            ... on Datasource {
                name
                origin
                description
                uri
                platform {
                    name
                    info {
                        logoUrl
                    }
                }
                platformNativeType
                properties {
                    customProperties {
                        key
                        value
                    }
                }
                ownership {
                    ...ownershipFields
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
            }
            ... on CorpUser {
                username
                info {
                    active
                    displayName
                    title
                    firstName
                    lastName
                    fullName
                }
                editableProperties {
                    displayName
                    title
                    pictureLink
                }
            }
            ... on CorpGroup {
                name
                info {
                    displayName
                    description
                }
                memberCount: relationships(
                    input: { types: ["IsMemberOfGroup"], direction: INCOMING, start: 0, count: 1 }
                ) {
                    total
                }
            }
            ... on Dashboard {
                urn
                type
                tool
                dashboardId
                properties {
                    name
                    description
                    externalUrl
                    access
                    lastModified {
                        time
                    }
                }
                ownership {
                    ...ownershipFields
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                editableProperties {
                    description
                }
                platform {
                    ...platformFields
                }
                domain {
                    ...entityDomain
                }
                container {
                    ...entityContainer
                }
            }
            ... on Chart {
                urn
                type
                tool
                chartId
                properties {
                    name
                    description
                    externalUrl
                    type
                    access
                    lastModified {
                        time
                    }
                }
                ownership {
                    ...ownershipFields
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                editableProperties {
                    description
                }
                platform {
                    ...platformFields
                }
                domain {
                    ...entityDomain
                }
                container {
                    ...entityContainer
                }
            }
            ... on DataFlow {
                urn
                type
                orchestrator
                flowId
                cluster
                properties {
                    name
                    description
                    project
                }
                ownership {
                    ...ownershipFields
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                editableProperties {
                    description
                }
                platform {
                    ...platformFields
                }
                domain {
                    ...entityDomain
                }
            }
            ... on DataJob {
                urn
                type
                dataFlow {
                    ...nonRecursiveDataFlowFields
                }
                jobId
                ownership {
                    ...ownershipFields
                }
                properties {
                    name
                    description
                }
                globalTags {
                    ...globalTagsFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                editableProperties {
                    description
                }
                domain {
                    ...entityDomain
                }
            }
            ... on GlossaryTerm {
                name
                hierarchicalName
                properties {
                    name
                    description
                    termSource
                    sourceRef
                    sourceUrl
                    rawSchema
                    customProperties {
                        key
                        value
                    }
                }
            }
            ... on Domain {
                urn
                properties {
                    name
                    description
                }
                ownership {
                    ...ownershipFields
                }
            }
            ... on Container {
                urn
                properties {
                    name
                    description
                }
                platform {
                    ...platformFields
                }
                editableProperties {
                    description
                }
                ownership {
                    ...ownershipFields
                }
                tags {
                    ...globalTagsFields
                }
                institutionalMemory {
                    ...institutionalMemoryFields
                }
                glossaryTerms {
                    ...glossaryTerms
                }
                subTypes {
                    typeNames
                }
                entities(input: {}) {
                    total
                }
                container {
                    ...entityContainer
                }
            }
            ... on MLFeatureTable {
                urn
                type
                name
                description
                featureTableProperties {
                    description
                    mlFeatures {
                        urn
                    }
                    mlPrimaryKeys {
                        urn
                    }
                }
                ownership {
                    ...ownershipFields
                }
                platform {
                    ...platformFields
                }
            }
            ... on MLModel {
                name
                description
                origin
                ownership {
                    ...ownershipFields
                }
                platform {
                    ...platformFields
                }
            }
            ... on MLModelGroup {
                name
                origin
                description
                ownership {
                    ...ownershipFields
                }
                platform {
                    ...platformFields
                }
            }
            ... on Tag {
                name
                description
            }
        }
        matchedFields {
            name
            value
        }
        insights {
            text
            icon
        }
    }
    facets {
        field
        displayName
        aggregations {
            value
            count
            entity {
                urn
                type
                ... on Tag {
                    name
                    description
                }
                ... on GlossaryTerm {
                    properties {
                        name
                    }
                }
                ... on DataPlatform {
                    ...platformFields
                }
                ... on Domain {
                    urn
                    properties {
                        name
                    }
                }
                ... on Container {
                    urn
                    platform {
                        ...platformFields
                    }
                    properties {
                        name
                    }
                }
                ... on CorpUser {
                    urn
                    username
                    properties {
                        displayName
                        fullName
                    }
                    editableProperties {
                        displayName
                        pictureLink
                    }
                }
                ... on CorpGroup {
                    urn
                    name
                    properties {
                        displayName
                    }
                }
            }
        }
    }
}

query getSearchResults($input: SearchInput!) {
    search(input: $input) {
        ...searchResults
    }
}

query getSearchResultsForMultiple($input: SearchAcrossEntitiesInput!) {
    searchAcrossEntities(input: $input) {
        ...searchResults
    }
}
